BULMAFACT - Model Entitat-Relació:
=================================

DICCIONARI DE DADES:
===================

;TIPUS DE CAMPS PREDEFINITS:
;--------------------------
<CODI>  = Clau artificial.
<CIF>   = Codi d'Identificació Fiscal.
<CPROV> = Codi de provincia (dos primers dígits del codi postal).
<SCP>   = Tres darrers dígits del codi postal.
<ADR>   = Adreça.
<POBL>  = Població.
<TLF>   = Telèfon.
<FAX>   = Fax.
<EML>   = eMail.
<URL>   = Url.
<CB>    = Compte Bancari.

;ENTITATS:
;--------

[CONFIGURACION]
- idconfiguracion: <CODI>
- nombre: Descripció curta de l'article.
- valor: Descripció completa (llarga) de l'article.

[TIPOSIVA]
- idtipoiva: <CODI>
- nombretipoiva: Nombre del tipo de IVA
- porcentajetipoiva: Porcentaje del tipo de IVA

[CANAL]
- idcanal: <CODI>
- descripcion: Descripcion del canal
- nombre: Nombre del canal

[C_COSTE]
- idc_coste: <CODI>
- descripcion: Descripcion del centro de coste.
- nombre: Nombre que se da al centro de coste.
- codigo: Codigo del centro de coste.
- padre: (FK C_COSTE) Campo que se usa para crear el arbol de centros de coste.
- imputacion: Campo de imputacion.
- debe: Campo de solo lectura, indica todo el acumulado en debe del centro de coste.
- haber: Campo de solo lectura, indica todo el acumulado en haber del centro de coste.

[GRUPO]
Esta tabla es estatica ya que los grupos no tienen problemas.
- idgrupo: <CODI>
- descripcion: Descripcion del grupo contable.


[ASIENTO]
- idasiento: <CODI>
- descripcion: Descripcion del asiento.
- fecha: Fecha en que se introduce el asiento.
- comentariosasiento: Comentarios del asiento.
- ordenasiento: Campo de ordenacion, idasiento ya no es el campo sobre el que se ordenan los asientos.

[AINTELIGENTE]
- idainteligente: <CODI>
- descripcion: Descripcion del asiento inteligente.
- comentariosasiento: Comentarios del asiento.

[BINTELIGENTE]
Todo lo que sale aqui son tablas.
- idbintelignete: <CODI>
- idainteligente: (FK) asiento al que pertenece la linea.
- iddiario: (FK) OBSOLETO, la tabla diario tiende a desaparecer.
- fecha: Fecha el asiento de diario.
- conceptocontable: Concepto contable del asiento.
- codcuenta: Codigo de cuenta del binteligente.
- descripcion: La descripcion de la linea de asiento inteligente.
- debe: Campo del debe.
- haber: Campo del haber.
- contrapartida: Contrapartida, formula de la contrapartida.
- comentario: Comentario sobre la linea inteligente.

[APUNTE]
La tabla de apuntes se encarga de recoger los latos que son validos en la contabilidad.
Son copia de la tabla borrador.
No se debe insertar ni borrar directamente en esta tabla. Para ello estan las
funciones de bases de datos abreasiento y cierraasiento.
- idapune: <CODI>
- codigoborrador: El codigo del borrador.
- idasiento: (FK) Indica a que asiento pertenece el apunte.
- iddiario: OBSOLETO, indicaba a que diario pertenece el apunte.
- fecha: La fecha de la transaccion economica.
- conceptocontable: El concepto que se le da al apunte.
- idcuenta: (FK) La cuenta sobre la que se hace la transaccion economica.
- descripcion: La descripcion del apunte.
- debe: cantidad en debe.
- haber: cantidad en haber. (Teoricamente uno de los dos debe valer cero).
- contrapartida: (FK) indica la cuenta que es la contrapartida de esta transaccion economia.
- comentario: Comentarios para el apunte.
- idcanal: (FK) Indica si hay un canal sobre el que se hace la operacion.
- marcaconciliacion: No se para que sirve, pero seguro que cuando lo pensamos para algo estaba.
- idc_coste: Centro de coste sobre el que se hace la operacion economica.
- idtipoiva: (FK) OBSOLETO, si habia IVA esto indica cual era. Ahora esta con el registro de IVA.
- orden: Dentro de un asiento los apuntes se pueden ordenar mediante este campo.
- punteo: El campo de punteo indica si la operacion ha sido revisada en el extracto de cuentas o no.

[BORRADOR]
Los borradores son la tabla sobre la que se realizan las inserciones en los libros contables.
- idborrador: <CODI>
- codigoborrador: El codigo del borrador.
- idasiento: (FK) Indica a que asiento pertenece el apunte.
- iddiario: OBSOLETO, indicaba a que diario pertenece el apunte.
- fecha: La fecha de la transaccion economica.
- conceptocontable: El concepto que se le da al apunte.
- idcuenta: (FK) La cuenta sobre la que se hace la transaccion economica.
- descripcion: La descripcion del apunte.
- debe: cantidad en debe.
- haber: cantidad en haber. (Teoricamente uno de los dos debe valer cero).
- contrapartida: (FK) indica la cuenta que es la contrapartida de esta transaccion economia.
- comentario: Comentarios para el apunte.
- idcanal: (FK) Indica si hay un canal sobre el que se hace la operacion.
- marcaconciliacion: No se para que sirve, pero seguro que cuando lo pensamos para algo estaba.
- idc_coste: Centro de coste sobre el que se hace la operacion economica.
- idtipoiva: (FK) OBSOLETO, si habia IVA esto indica cual era. Ahora esta con el registro de IVA.
- orden: Dentro de un asiento los apuntes se pueden ordenar mediante este campo.


[LINAMORTIZACION]
Linea de amortizacion. Esta tabla muestra las lineas de amortizacion para una amortizacion determinada.
- idlinamortizacion: <CODI>
- idamortizacion: (FK) indica cual es la amortizacion a la que pertenece la linea.
- idasiento: (FK) Si la amortizacion ya tiene el asiento realizado, entonces aqui indica cual es el asiento que corresponde con la amortizacion.
- ejercicio: Indica en que ejercicio se ha hecho la amortizacion. Debido a que las amortizaciones se pueden propagar durante varios ejercicios y bulmages guarda una base de datos por ejercicio.
- fechaprevista: Fecha en la que se prevee que se vaya a hacer el asiento.
- cantidad: Valor que se va a amortizar.


[CUENTA]
La tabla de cuentas establece el arbol de cuentas.
- idcuenta: <CODI> Autonumerico que indica cada cuenta.
- codigo: el string que indica la cuenta.
- descripcion: La descripcion de la cuenta.
- imputacion: Indica si es una cuenta de imputacion o no.
- padre: (FK) sirve para generar el arbol de cuentas. Indica cual es el padre de la cuenta.
- bloqueada: Indica si la cuenta esta bloqueada o no.
- idgrupo: (FK) Indica a que grupo pertenece la cuenta.
- msg: Mensaje para la cuenta. OBSOLETO
- debe: (lectura) Este parametro indica lo que lleva de acumulado en debe la cuenta. El parametro es actualizado por los triggers.
- haber: (lectura) Este parametro indica lo que lleva de acumulado en haber la cuenta. El parametro es actualizado por los trggers.
- nodebe: Este campo indica si la cuenta tiene bloqueada las inserciones en su debe.
- nohaber: Este campo indica si la cuenta tiene bloqueadas las inserciones en su haber.
- regularizacion: Indica si la cuenta es de regularizacion o no.
- activo: Este campo indica si la cuenta es de activo.
- nombreent_cuenta: Nombre de la entidad a que representa la cuenta.
- cifent_cuenta: CIF de la entidad a que representa la cuenta.
- dirent_cuenta: Direccion de la entidad que representa la cuenta.
- telent_cuenta: Telefono de la entidad que representa la cuenta.
- coment_cuenta: Comentarios de la entidad que representa la cuenta.
- bancoent_cuenta: Cuenta bancaria de la entidad que representa la cuenta, si existe.
- emailent_cuenta: E-mail de la entidad que representa la cuenta.
- tipocuenta: Indicador del tipo de cuenta. ENUM (1.-activo, 2.-pasivo, 3.-neto, 4.-ingresos, 5.-gastos)


[REGISTROIVA]
Esta tabla sirve para almacenar el registro de iva. Al mismo tiempo nos servira para elaborar el listado 347 de
las empresas a las que hemos cobrado mas de 3000 euros.
- idregistroiva: <CODI>
- contrapartida: (FK) indica cual es la cuenta del cliente/proveedor sobre el que se hace la factura. Como normalmente es la contrapartida de la cuenta de IVA se coge de la contrapartida. Todos los datos NIF, etc se cogen de aqui.
- baseimp: Indica cual es la base imponible de la factura.
- iva: Indica cual es el porcentaje de IVA.
- factura: Indica cual es el numero de factura.
- idborrador: (FK) Indica cual es el borrador con el que se corresponde la factura.
- incregistro: numero de registro.
- regularizacion: Indica si esto entra en la regularizacion.
- plan349: Indica si debe incluirse esta factura en el plan 349.
- numorden: Indica el numero de orden de la factura. Se usa para un registro interno.
- cif: El cif de la empresa. Normalmente se coge de la cuenta de contrapartida.


[COMPBALANCE]
Esta tabla indica el componente de un balance. Esto nos sirve para generar listados de balance.
- idcompbalance: <CODI>
- idbalance: (FK) Indica a que balance pertenece el componente.
- idmpatrimonial: Masa patrimonial que compone el componente (La formula).
- concepto: Concepto que se va a mostrar en el listado.
- orden: Orden de aparicion en el listado.
- tabulacion: si existe una tabulacion esta expresad aqui.


[IVAINTELIGENTE]
Esta tabla define como son las entradas de registro de iva inteligentes.
- idivainteligente: <CODI>
- idainteligente: (FK) El asiento inteligente.
- idbinteligente: (FK) El apunte inteligente con el que se corresponde.
- contrapartida: Formula para encontrar la contrapartida.
- baseimp: Formula para encontrar la base imponible.
- iva: Formula para encontrar el iva.
- factura: Formula para encontrar el numero de factura.
- idborrador: ???????
- incregistro: Indice del registro de iva
- regularizacion: Si el registro debe ser tenido en cuenta en la regularizacion.
- plan349: Formula para saber si la factura debe incluirse en el plan 349
- numorden: Formula para saber el orden interno de la factura.
- cif: Cif de la empresa, o formula para hayarlo.

[BALANCE]
La tabla de balance es la cabecilla de los listados de balances.
- idbalance: <CODI>
- nombrebalance: Nombre del balance. Listado.

[DIARIO]
OBSOLETA
- iddiario:  El identificador de diario
- descripcion: La descripcion del diario.

[MPATRIMONIAL]
Las masas patrimoniales son agrupaciones de cuentas que actuan como una cuenta conjunta.
La extension va mas alla de los grupos contables ya que las masas patrimoniales pueden 
extenderse a traves de varias cuentas del arbol de cuentas sin usar la jerarquia de este.
- idmpatrimonial: <CODI>
- idbalance: (FK) Si la masa patrimonial es para calculo de balances entonces no aparece en los listados. De ahi este campo.
- descmpatrimonial: Descripcion de la masa patrimonial.
- orden: Orden de aparicion.
- tabulacion: Campo de tabulacion para la masa patrimonial.
- saldo: Saldo de la masa patrimonial.
- opdesc: Operaciones especiales.


[AMORTIZACION]
La amortizacion.
- idamortizacion: <CODI>
- idcuentaactivo: (FK) La cuenta del activo a amortizar.
- idcuentaamortizacion: (FK) La cuenta de amortizacion.
- descamortizacion: Descripcion de la amortizacion.
- nomamortizacion: Nombre de la amortizacion.
- fechacompra: Fecha en que se realiza la compra.
- fecha1cuota: Fecha en que se realiza la primera cuota de amortizacion.
- valorcompra: Valor de la compra.
- periodicidad: Tipo de periodicidad de la amortizacion (anual, mensual, etc)
- numcuotas: Numero de cuotas de amortizacion.
- metodo: Metodo de amortizacion incremental, media, etc
- nifproveedor: nif del proveedor del bien
- nomproveedor: Nombre del proveedor del bien. Datos que salen de la cuenta del bien.
- dirproveedor: lo mismo
- telproveedor: Datos del proveedor.
- agrupacion: Este campo sirve para hacer agrupaciones de amortizacion. En un listado se puede elegir si se desea ver una agrupacion entera.


;RELACIONS:
;---------

{acumulado_canal}
- debe: acumulado en debe.
- haber: acumulado en haber.

(acumulado_c_coste)
- debe: acumulado en debe.
- haber: acumulado en haber.
